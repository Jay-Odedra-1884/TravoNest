<% layout('layouts/boilerplate') -%>
   <div class="row">
    <div class="col-10 offset-1 col-md-8 offset-md-2">
        <form method="post" action="/listing/<%= data._id %>?_method=PUT" enctype="multipart/form-data">
            <h3 class="">Edit</h3>
            <div class="row">
                <div class="mb-3 col-md-6">
                  <label for="title" class="form-label">Title : </label>
                  <input
                    id="title"
                    class="form-control"
                    type="text"
                    name="listing[title]"
                    value="<%= data.title %>"
                    required
                  />
                </div>
                <div class="mb-3 col-md-6">
                  <label for="bio" class="form-label">Bio : </label>
                  <input
                    id="bio"
                    class="form-control"
                    type="text"
                    name="listing[bio]"
                    value="<%= data.bio %>"
                    required
                  />
                </div>
              </div>
        <div class="mb-3">
            <label for="description" class="form-label">Describe Here :
            </label>
            <textarea id="description" class="form-control" name="listing[description]"><%= data.description %></textarea>
        </div>
        <div class="row">
            <div class="mb-3 col-md-5">
                <label for="image" class="form-label">Upload Image :
                </label>
                <input id="image" class="form-control" type="file" name="listing[image]">
            </div>
            <div class="mb-3 col-md-7">
                <label for="category" class="form-label"> Add Country : </label>
              <!-- enum: ["city", "mountain", "beach", "forest", "desert", "castels", "house-boat", "amazing-pools", "farms", "island", "camping"], -->
               
                <select class="form-select" name="listing[category]" id="category">
                    <% let categorys = [
                    "city", "mountain", "beach", "forest", "desert", "castels", "house-boat", "amazing-pools", "farms", "island", "camping"
               ] %>
               <% categorys.forEach(category => { %>
                        <option value="<%= category %>" <%= data.category === category ? "selected" : "" %>><%= category %></option>
                    <% }); %>
                </select>
              </div>
        </div>
        <div class="mb-3">
            <img src=<%= newUrl %> alt="listing image">
        </div>
        <div class="mb-3">
            <label for="price" class="form-label">What do you thinnk about Price : 
            </label>
            <input id="price" class="form-control" type="number" name="listing[price]" value="<%= data.price %>" required>
        </div>
        <div class="row">
            <div class="mb-3 col-md-4">
                <label for="location" class="form-label">Location <span style="color: gray; font-size: small;">(Dont add country name)</span> :</label>
            </label>
                <input id="location" class="form-control" type="text" name="listing[location]" value="<%= data.location %>" required>
          <ul id="suggestions" class="list-group" style="position:absolute; z-index:1000;"></ul>
                
            </div>
            <div class="mb-3 col-md-8">
                <label for="country" class="form-label">
                    Add Country :            
                </label>
                <select class="form-control" name="listing[country]" id="country">
                    <option value="">Select a country</option>
                    <% 
                        let countries = [
                            "Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Antigua and Barbuda", "Argentina", "Armenia", "Australia", 
                            "Austria", "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bhutan", 
                            "Bolivia", "Bosnia and Herzegovina", "Botswana", "Brazil", "Brunei", "Bulgaria", "Burkina Faso", "Burundi", "Cambodia", 
                            "Cameroon", "Canada", "Cape Verde", "Central African Republic", "Chad", "Chile", "China", "Colombia", "Comoros", "Congo", 
                            "Costa Rica", "Croatia", "Cuba", "Cyprus", "Czech Republic", "Denmark", "Djibouti", "Dominica", "Dominican Republic", 
                            "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", "Ethiopia", "Fiji", "Finland", "France", 
                            "Gabon", "Gambia", "Georgia", "Germany", "Ghana", "Greece", "Guatemala", "Guinea", "Guyana", "Haiti", "Honduras", 
                            "Hungary", "Iceland", "India", "Indonesia", "Iran", "Iraq", "Ireland", "Italy", "Jamaica", "Japan", "Jordan", "Kazakhstan", 
                            "Kenya", "South Korea", "Kuwait", "Laos", "Latvia", "Lebanon", "Libya", "Lithuania", "Luxembourg", "Madagascar", "Malaysia", 
                            "Maldives", "Mali", "Malta", "Mexico", "Monaco", "Mongolia", "Montenegro", "Morocco", "Mozambique", "Myanmar", "Namibia", 
                            "Nepal", "Netherlands", "New Zealand", "Nicaragua", "Nigeria", "Norway", "Oman", "Pakistan", "Palestine", "Panama", 
                            "Paraguay", "Peru", "Philippines", "Poland", "Portugal", "Qatar", "Romania", "Russia", "Saudi Arabia", "Senegal", "Serbia", 
                            "Singapore", "Slovakia", "South Africa", "Spain", "Sri Lanka", "Sweden", "Switzerland", "Thailand", "Tunisia", "Turkey", 
                            "Ukraine", "United Arab Emirates", "United Kingdom", "United States", "Vietnam", "Yemen", "Zimbabwe"
                        ]; 
                    %>
                    <% countries.forEach(country => { %>
                        <option value="<%= country %>" <%= data.country === country ? "selected" : "" %>><%= country %></option>
                    <% }); %>
                </select>
            </div>
        </div>
        <button class="btn btn-dark mb-3" type="submit">Edit</button>
    </form>
</div>
</div>

<script src="/js/location.js"></script>
